"use strict";(self.webpackChunk_0yukali0=self.webpackChunk_0yukali0||[]).push([[713],{3905:(e,r,n)=>{n.d(r,{Zo:()=>d,kt:()=>m});var t=n(7294);function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function c(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=t.createContext({}),s=function(e){var r=t.useContext(i),n=r;return e&&(n="function"==typeof e?e(r):l(l({},r),e)),n},d=function(e){var r=s(e.components);return t.createElement(i.Provider,{value:r},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},g=t.forwardRef((function(e,r){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=s(n),g=a,m=u["".concat(i,".").concat(g)]||u[g]||p[g]||o;return n?t.createElement(m,l(l({ref:r},d),{},{components:n})):t.createElement(m,l({ref:r},d))}));function m(e,r){var n=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=g;var c={};for(var i in r)hasOwnProperty.call(r,i)&&(c[i]=r[i]);c.originalType=e,c[u]="string"==typeof e?e:a,l[1]=c;for(var s=2;s<o;s++)l[s]=n[s];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}g.displayName="MDXCreateElement"},5326:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var t=n(7462),a=(n(7294),n(3905));const o={id:"argocdbuild",title:"ArgoCD\u5b89\u88dd"},l="ArgoCD \u5b89\u88dd",c={unversionedId:"kubernetes-native/kubernetes/argocdbuild",id:"kubernetes-native/kubernetes/argocdbuild",title:"ArgoCD\u5b89\u88dd",description:"\u90e8\u5c6cArgoCD\u65bck8s",source:"@site/docs/kubernetes-native/kubernetes/argocd.md",sourceDirName:"kubernetes-native/kubernetes",slug:"/kubernetes-native/kubernetes/argocdbuild",permalink:"/docs/kubernetes-native/kubernetes/argocdbuild",draft:!1,editUrl:"https://github.com/0yukali0/0yukali0.github.io/docs/kubernetes-native/kubernetes/argocd.md",tags:[],version:"current",frontMatter:{id:"argocdbuild",title:"ArgoCD\u5b89\u88dd"},sidebar:"tutorialSidebar",previous:{title:"\u4ecb\u7d39",permalink:"/docs/intro"},next:{title:"kubernetes\u53e2\u96c6\u5efa\u7acb",permalink:"/docs/kubernetes-native/kubernetes/buildkubernetes"}},i={},s=[{value:"\u90e8\u5c6cArgoCD\u65bck8s",id:"\u90e8\u5c6cargocd\u65bck8s",level:2},{value:"\u5b89\u88ddArgoCD Cli",id:"\u5b89\u88ddargocd-cli",level:2},{value:"\u66f4\u65b0\u670d\u52d9\u70baLoadBalancer",id:"\u66f4\u65b0\u670d\u52d9\u70baloadbalancer",level:2},{value:"\u8a2d\u5b9aIngress(\u53ef\u9078)",id:"\u8a2d\u5b9aingress\u53ef\u9078",level:2},{value:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc",id:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc",level:2}],d={toc:s},u="wrapper";function p(e){let{components:r,...n}=e;return(0,a.kt)(u,(0,t.Z)({},d,n,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"argocd-\u5b89\u88dd"},"ArgoCD \u5b89\u88dd"),(0,a.kt)("h2",{id:"\u90e8\u5c6cargocd\u65bck8s"},"\u90e8\u5c6cArgoCD\u65bck8s"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kubectl create namespace argocd\nkubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\n")),(0,a.kt)("h2",{id:"\u5b89\u88ddargocd-cli"},"\u5b89\u88ddArgoCD Cli"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"curl -sSL -o argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64\nsudo install -m 555 argocd-linux-amd64 /usr/local/bin/argocd\nrm argocd-linux-amd64\n")),(0,a.kt)("h2",{id:"\u66f4\u65b0\u670d\u52d9\u70baloadbalancer"},"\u66f4\u65b0\u670d\u52d9\u70baLoadBalancer"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'kubectl patch svc argocd-server -n argocd -p \'{"spec": {"type": "LoadBalancer"}}\'\n')),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"\u7576\u5b8c\u6210metal-LB\u5b89\u88dd\u8207\u8a2d\u5b9a\u5f8c\uff0cload Balancer\u624d\u6709\u610f\u7fa9")),(0,a.kt)("h2",{id:"\u8a2d\u5b9aingress\u53ef\u9078"},"\u8a2d\u5b9aIngress(\u53ef\u9078)"),(0,a.kt)("p",null,"\u90e8\u5c6cIngress\u7269\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: argocd-server-http-ingress\n  namespace: argocd\n  annotations:\n    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"\n    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"\nspec:\n  ingressClassName: nginx\n  rules:\n  - http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: argocd-server\n            port:\n              name: http\n    host: argocd.example.com\n  tls:\n  - hosts:\n    - argocd.example.com\n    secretName: argocd-secret\n')),(0,a.kt)("p",null,"\u66f4\u6539client\u7aef\u7684\u4e3b\u6a5f\u7684hosts\u6a94\u6848"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"linux\u8def\u5f91\u70ba/etc/hosts"),(0,a.kt)("li",{parentName:"ul"},"window\u8def\u5f91\u70baC:\\Windows\\System32\\drivers\n\u6211\u7684Ingress-controller\u7684service(load balancer)\u7684\u5916\u90e8IP\u70ba192.168.50.171\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"192.168.50.171 argocd.example.com\n")),(0,a.kt)("p",null,"\u56e0\u6b64\u700f\u89bd\u5668\u8f38\u5165",(0,a.kt)("a",{parentName:"p",href:"http://argocd.example.com%EF%BC%8C%E4%BE%BF%E6%9C%83%E6%89%BEIngress-controller%E4%B8%A6%E8%BD%89%E6%8E%A5%E5%88%B0argocd%E6%9C%8D%E5%8B%99%E4%BA%86%E3%80%82"},"http://argocd.example.com\uff0c\u4fbf\u6703\u627eIngress-controller\u4e26\u8f49\u63a5\u5230argocd\u670d\u52d9\u4e86\u3002")),(0,a.kt)("h2",{id:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc"},"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"argocd admin initial-password -n argocd\nargocd login <ARGOCD_SERVER> //\u4e5f\u5c31\u662fload balancer\u5916\u90e8IP\nargocd account update-password\n")))}p.isMDXComponent=!0}}]);