"use strict";(self.webpackChunk_0_yukali_0_github_io=self.webpackChunk_0_yukali_0_github_io||[]).push([[1475],{4341:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=n(4848),a=n(8453);const o={id:"metallbMonitoringSetting",title:"Metal-LB Prometheus\u76e3\u63a7\u8a2d\u5b9a"},l="metallb Prometheus\u76e3\u63a7\u8a2d\u5b9a",i={id:"kubernetes-native/loadbalancer/metallb/metallbMonitoringSetting",title:"Metal-LB Prometheus\u76e3\u63a7\u8a2d\u5b9a",description:"\u5982\u679c\u4f60\u63a1\u7528Metal-LB helm chart\u5c31\u4e0d\u7528\u4ee5\u4e0b\u6d41\u7a0b\u4e86\u3002",source:"@site/docs/kubernetes-native/loadbalancer/metallb/monitor.md",sourceDirName:"kubernetes-native/loadbalancer/metallb",slug:"/kubernetes-native/loadbalancer/metallb/metallbMonitoringSetting",permalink:"/docs/kubernetes-native/loadbalancer/metallb/metallbMonitoringSetting",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/kubernetes-native/loadbalancer/metallb/monitor.md",tags:[],version:"current",frontMatter:{id:"metallbMonitoringSetting",title:"Metal-LB Prometheus\u76e3\u63a7\u8a2d\u5b9a"}},s={},c=[{value:"\u4fee\u6539metallb\u7684service\u914d\u7f6e",id:"\u4fee\u6539metallb\u7684service\u914d\u7f6e",level:2},{value:"Prometheus Service Monitor",id:"prometheus-service-monitor",level:2},{value:"\u9810\u671f\u7d50\u679c",id:"\u9810\u671f\u7d50\u679c",level:2}];function m(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"metallb-prometheus\u76e3\u63a7\u8a2d\u5b9a",children:"metallb Prometheus\u76e3\u63a7\u8a2d\u5b9a"})}),"\n",(0,r.jsxs)(t.p,{children:["\u5982\u679c\u4f60\u63a1\u7528",(0,r.jsx)(t.a,{href:"https://github.com/metallb/metallb/tree/main/charts/metallb",children:"Metal-LB helm chart"}),"\u5c31\u4e0d\u7528\u4ee5\u4e0b\u6d41\u7a0b\u4e86\u3002"]}),"\n",(0,r.jsx)(t.h2,{id:"\u4fee\u6539metallb\u7684service\u914d\u7f6e",children:"\u4fee\u6539metallb\u7684service\u914d\u7f6e"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"apiVersion: v1\nkind: Service\nmetadata:\n  name: webhook-service\n  namespace: metallb-system\n  labels: # \u6dfb\u52a0Labels\n    component: controller\nspec:\n  ports:\n  - port: 443\n    targetPort: 9443\n  - name: monitoring # \u628aPrometheus Port\u653e\u51fa\u4f86\n    port: 9889\n    targetPort: 7472\n  selector:\n    component: controller\n"})}),"\n",(0,r.jsx)(t.h2,{id:"prometheus-service-monitor",children:"Prometheus Service Monitor"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"apiVersion: monitoring.coreos.com/v1\nkind: ServiceMonitor\nmetadata:\n  name: metallb-monitor\n  namespace: grafana\n  labels:\n    release: grafana\nspec:\n  jobLabel: jobLabel\n  selector:\n    matchLabels:\n      component: controller\n  namespaceSelector:\n    matchNames:\n    - metallb-system\n  endpoints:\n  - path: /metrics\n    port: monitor\n    scrapeTimeout: 30s\n"})}),"\n",(0,r.jsx)(t.h2,{id:"\u9810\u671f\u7d50\u679c",children:"\u9810\u671f\u7d50\u679c"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Metal-lb\u65bcPrometheus",src:n(877).A+"",width:"1899",height:"450"})})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},877:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/metallb-monitor-33dbad8b261a042eb9acb70a3fcd4227.png"},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>i});var r=n(6540);const a={},o=r.createContext(a);function l(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);