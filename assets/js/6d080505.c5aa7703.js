"use strict";(self.webpackChunk_0_yukali_0_github_io=self.webpackChunk_0_yukali_0_github_io||[]).push([[8205],{5242:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=n(4848),s=n(8453);const r={id:"buildozone",title:"ozone\u53e2\u96c6\u5efa\u7acb"},i="\u5efa\u7acbOzone",a={id:"hadoop-native/ozone/buildozone",title:"ozone\u53e2\u96c6\u5efa\u7acb",description:"\u8a2d\u5b9a.bashrc",source:"@site/docs/hadoop-native/ozone/buildozone.md",sourceDirName:"hadoop-native/ozone",slug:"/hadoop-native/ozone/buildozone",permalink:"/docs/hadoop-native/ozone/buildozone",draft:!1,unlisted:!1,editUrl:"https://github.com/0yukali0/0yukali0.github.io/docs/hadoop-native/ozone/buildozone.md",tags:[],version:"current",frontMatter:{id:"buildozone",title:"ozone\u53e2\u96c6\u5efa\u7acb"}},d={},c=[{value:"\u8a2d\u5b9a.bashrc",id:"\u8a2d\u5b9abashrc",level:2},{value:"ozone/etc/hadoop/ozone-env.sg",id:"ozoneetchadoopozone-envsg",level:2},{value:"\u5efa\u8cc7\u6599\u593e",id:"\u5efa\u8cc7\u6599\u593e",level:2},{value:"ozone/etc/hadoop/ozone-site.xml",id:"ozoneetchadoopozone-sitexml",level:2},{value:"\u50b3\u5230\u500b\u4e3b\u6a5f",id:"\u50b3\u5230\u500b\u4e3b\u6a5f",level:2},{value:"\u5404\u4e3b\u6a5f\u555f\u52d5scm\u8207om",id:"\u5404\u4e3b\u6a5f\u555f\u52d5scm\u8207om",level:2}];function l(e){const o={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"\u5efa\u7acbozone",children:"\u5efa\u7acbOzone"})}),"\n",(0,t.jsx)(o.h2,{id:"\u8a2d\u5b9abashrc",children:"\u8a2d\u5b9a.bashrc"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"# JAVA\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\nexport PATH=$JAVA_HOME/bin:$PATH\n\n# Ozone\nexport OZONE_HOME=/opt/ozone\nexport PATH=$PATH:$OZONE_HOME/bin\n"})}),"\n",(0,t.jsx)(o.h2,{id:"ozoneetchadoopozone-envsg",children:"ozone/etc/hadoop/ozone-env.sg"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\nexport OZONE_HOME=/opt/ozone\nexport OZONE_CONF_DIR=${OZONE_HOME}/etc/hadoop\nexport OZONE_LOG_DIR=${OZONE_HOME}/logs\n"})}),"\n",(0,t.jsx)(o.h2,{id:"\u5efa\u8cc7\u6599\u593e",children:"\u5efa\u8cc7\u6599\u593e"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"# ozone\nmkdir logs\n"})}),"\n",(0,t.jsx)(o.h2,{id:"ozoneetchadoopozone-sitexml",children:"ozone/etc/hadoop/ozone-site.xml"}),"\n",(0,t.jsx)(o.p,{children:"\u7522\u751f\u914d\u7f6e\u6a94\u3002"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"ozone genconf /opt/ozone/etc/hadoop\n"})}),"\n",(0,t.jsx)(o.p,{children:"\u66f4\u6539localhost\u70ba\u5404\u4e3b\u6a5f\u540d\u7a31(/etc/hosts)\u3002"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"<property>\n        <name>ozone.om.address</name>\n        <value>s1,s2</value>\n        <tag>OM, REQUIRED</tag>\n        <description>\n      The address of the Ozone OM service. This allows clients to discover\n      the address of the OM.\n    </description>\n    </property>\n    <property>\n        <name>ozone.metadata.dirs</name>\n        <value>/opt/ozone/data</value>\n        <tag>OZONE, OM, SCM, CONTAINER, STORAGE, REQUIRED</tag>\n        <description>\n      This setting is the fallback location for SCM, OM, Recon and DataNodes\n      to store their metadata. This setting may be used only in test/PoC\n      clusters to simplify configuration.\n\n      For production clusters or any time you care about performance, it is\n      recommended that ozone.om.db.dirs, ozone.scm.db.dirs and\n      dfs.container.ratis.datanode.storage.dir be configured separately.\n    </description>\n    </property>\n    <property>\n        <name>ozone.scm.client.address</name>\n        <value>s1,s2</value>\n        <tag>OZONE, SCM, REQUIRED</tag>\n        <description>\n      The address of the Ozone SCM client service. This is a required setting.\n\n      It is a string in the host:port format. The port number is optional\n      and defaults to 9860.\n    </description>\n    </property>\n    <property>\n        <name>ozone.scm.names</name>\n        <value>s1, s2</value>\n        <tag>OZONE, REQUIRED</tag>\n        <description>\n      The value of this property is a set of DNS | DNS:PORT | IP\n      Address | IP:PORT. Written as a comma separated string. e.g. scm1,\n      scm2:8020, 7.7.7.7:7777.\n      This property allows datanodes to discover where SCM is, so that\n      datanodes can send heartbeat to SCM.\n    </description>\n    </property>\n"})}),"\n",(0,t.jsx)(o.h2,{id:"\u50b3\u5230\u500b\u4e3b\u6a5f",children:"\u50b3\u5230\u500b\u4e3b\u6a5f"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"scp -rq ./ozone s2:/home/user\nsudo mv ozone /opt \n"})}),"\n",(0,t.jsx)(o.h2,{id:"\u5404\u4e3b\u6a5f\u555f\u52d5scm\u8207om",children:"\u5404\u4e3b\u6a5f\u555f\u52d5scm\u8207om"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"ozone scm --init\nozone om --init\nozone --daemon start scm\nozone --daemon start om\nozone --daemon start datanode\n"})})]})}function p(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>a});var t=n(6540);const s={},r=t.createContext(s);function i(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);