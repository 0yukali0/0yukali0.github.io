"use strict";(self.webpackChunk_0yukali0=self.webpackChunk_0yukali0||[]).push([[183],{3905:(e,a,o)=>{o.d(a,{Zo:()=>h,kt:()=>m});var t=o(7294);function n(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,t)}return o}function p(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){n(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function d(e,a){if(null==e)return{};var o,t,n=function(e,a){if(null==e)return{};var o,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||(n[o]=e[o]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=t.createContext({}),s=function(e){var a=t.useContext(l),o=a;return e&&(o="function"==typeof e?e(a):p(p({},a),e)),o},h=function(e){var a=s(e.components);return t.createElement(l.Provider,{value:a},e.children)},i="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,h=d(e,["components","mdxType","originalType","parentName"]),i=s(o),u=n,m=i["".concat(l,".").concat(u)]||i[u]||c[u]||r;return o?t.createElement(m,p(p({ref:a},h),{},{components:o})):t.createElement(m,p({ref:a},h))}));function m(e,a){var o=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=o.length,p=new Array(r);p[0]=u;var d={};for(var l in a)hasOwnProperty.call(a,l)&&(d[l]=a[l]);d.originalType=e,d[i]="string"==typeof e?e:n,p[1]=d;for(var s=2;s<r;s++)p[s]=o[s];return t.createElement.apply(null,p)}return t.createElement.apply(null,o)}u.displayName="MDXCreateElement"},8378:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>l,contentTitle:()=>p,default:()=>c,frontMatter:()=>r,metadata:()=>d,toc:()=>s});var t=o(7462),n=(o(7294),o(3905));const r={id:"buildhadoop",title:"hadoop\u53e2\u96c6\u5efa\u7acb"},p="Hadoop \u591a\u7bc0\u9ede\u5b89\u88dd",d={unversionedId:"hadoop-native/hadoop/buildhadoop",id:"hadoop-native/hadoop/buildhadoop",title:"hadoop\u53e2\u96c6\u5efa\u7acb",description:"VM\u74b0\u5883",source:"@site/docs/hadoop-native/hadoop/buildhadoop.md",sourceDirName:"hadoop-native/hadoop",slug:"/hadoop-native/hadoop/buildhadoop",permalink:"/docs/hadoop-native/hadoop/buildhadoop",draft:!1,editUrl:"https://github.com/0yukali0/0yukali0.github.io/docs/hadoop-native/hadoop/buildhadoop.md",tags:[],version:"current",frontMatter:{id:"buildhadoop",title:"hadoop\u53e2\u96c6\u5efa\u7acb"},sidebar:"tutorialSidebar",previous:{title:"Ray Train\u5927\u7db1",permalink:"/docs/AI/framework/ray/train/ray_overview_train"},next:{title:"hbase\u53e2\u96c6\u5efa\u7acb",permalink:"/docs/hadoop-native/hbase/buildhbase"}},l={},s=[{value:"VM\u74b0\u5883",id:"vm\u74b0\u5883",level:2},{value:"Java 8 \u5b89\u88dd",id:"java-8-\u5b89\u88dd",level:2},{value:"SSH \u5b89\u88dd",id:"ssh-\u5b89\u88dd",level:2},{value:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a",id:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a",level:3},{value:"hadoop\u5b89\u88dd",id:"hadoop\u5b89\u88dd",level:2},{value:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a",id:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a",level:2},{value:"hadoop\u7684JAVA_HOME\u8a2d\u5b9a",id:"hadoop\u7684java_home\u8a2d\u5b9a",level:3},{value:"etc/hadoop/hadoop-env.sh",id:"etchadoophadoop-envsh",level:4},{value:"\u66f4\u65b0hdfs\u914d\u7f6e",id:"\u66f4\u65b0hdfs\u914d\u7f6e",level:3},{value:"etc/hadoop/core-site.xml",id:"etchadoopcore-sitexml",level:4},{value:"etc/hadoop/hdfs-site.xml",id:"etchadoophdfs-sitexml",level:4},{value:"\u66f4\u65b0yarn\u914d\u7f6e",id:"\u66f4\u65b0yarn\u914d\u7f6e",level:3},{value:"etc/hadoop/mapred-site.xml",id:"etchadoopmapred-sitexml",level:4},{value:"etc/hadoop/yarn-site.xml",id:"etchadoopyarn-sitexml",level:4},{value:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede",id:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede",level:2},{value:"\u66f4\u65b0 etc/hadoop/workers",id:"\u66f4\u65b0-etchadoopworkers",level:4},{value:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede",id:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede",level:2},{value:"\u555f\u52d5hdfs\u8207yarn",id:"\u555f\u52d5hdfs\u8207yarn",level:2}],h={toc:s},i="wrapper";function c(e){let{components:a,...o}=e;return(0,n.kt)(i,(0,t.Z)({},h,o,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"hadoop-\u591a\u7bc0\u9ede\u5b89\u88dd"},"Hadoop \u591a\u7bc0\u9ede\u5b89\u88dd"),(0,n.kt)("h2",{id:"vm\u74b0\u5883"},"VM\u74b0\u5883"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Virtualbox"),(0,n.kt)("li",{parentName:"ul"},"ubuntu server 22.04"),(0,n.kt)("li",{parentName:"ul"},"2\u7bc0\u9ede(1\u4e3b1\u5974\uff0cbridge)\n/etc/hosts\u5982\u4e0b")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"s1 192.168.0.170\ns2 192.168.0.171\n")),(0,n.kt)("h2",{id:"java-8-\u5b89\u88dd"},"Java 8 \u5b89\u88dd"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install openjdk-8-jre-headless -y\nsudo apt install openjdk-8-jdk-headless -y\n")),(0,n.kt)("h2",{id:"ssh-\u5b89\u88dd"},"SSH \u5b89\u88dd"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get install ssh -y\nsudo apt-get install openssh-server -y\n")),(0,n.kt)("h3",{id:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a"},"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a"),(0,n.kt)("p",null,"\u5c07\u4e3b\u7bc0\u9ede\u7684pub key\u8907\u88fd\u5230\u5b50\u7bc0\u9ede"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\nchmod 0600 ~/.ssh/authorized_keys\nssh-copy-id -i ~/.ssh/authorized_keys slave:/home/hadoop/.ssh/authorized_keys #\u4f7f\u7528scp\u4e5f\u53ef\n")),(0,n.kt)("h2",{id:"hadoop\u5b89\u88dd"},"hadoop\u5b89\u88dd"),(0,n.kt)("p",null,"\u4e0b\u8f09hadoop binary\u6a94\uff0c\u89e3\u58d3\u7e2e\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# /home/hadoop/\nwget https://dlcdn.apache.org/hadoop/common/hadoop-3.3.6/hadoop-3.3.6.tar.gz\ntar -xvf hadoop-3.3.6.tar.gz\n# /home/hadoop/hadoop\nmv hadoop-3.3.6 hadoop\n")),(0,n.kt)("h1",{id:"\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578"},"\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6b64\u6b65\u9a5f\u6240\u6709\u7bc0\u9ede\u90fd\u8981\u505a"),"\uff0c\u4fee\u6539.bashrc\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5167\u5bb9\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"# HADOOP_HOME \u4ee5hadoop\u8cc7\u6599\u593e\u6240\u5728\u70ba\u4e3b\uff0c\u6211\u662f\u653e\u5728hadoop\u5bb6\u76ee\u9304\u3002\n# \u8def\u5f91\u70ba /home/hadoop/\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\nexport PATH=$JAVA_HOME/bin:$PATH\nexport HADOOP_CLASSPATH=${JAVA_HOME}/lib/tools.jar\nexport HADOOP_HOME=/home/hadoop/hadoop\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\nexport HADOOP_MAPRED_HOME=${HADOOP_HOME}\nexport HADOOP_COMMON_HOME=${HADOOP_HOME}\nexport HADOOP_HDFS_HOME=${HADOOP_HOME}\nexport YARN_HOME=${HADOOP_HOME}\n")),(0,n.kt)("p",null,"\u5957\u7528\u8a2d\u5b9a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"source .bashrc\n")),(0,n.kt)("h2",{id:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a"},"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a"),(0,n.kt)("h3",{id:"hadoop\u7684java_home\u8a2d\u5b9a"},"hadoop\u7684JAVA_HOME\u8a2d\u5b9a"),(0,n.kt)("h4",{id:"etchadoophadoop-envsh"},"etc/hadoop/hadoop-env.sh"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\n")),(0,n.kt)("h3",{id:"\u66f4\u65b0hdfs\u914d\u7f6e"},"\u66f4\u65b0hdfs\u914d\u7f6e"),(0,n.kt)("h4",{id:"etchadoopcore-sitexml"},"etc/hadoop/core-site.xml"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"<configuration>\n    <property>\n        <name>fs.defaultFS</name>\n        <value>hdfs://s1:9000</value>\n    </property>\n</configuration>\n")),(0,n.kt)("h4",{id:"etchadoophdfs-sitexml"},"etc/hadoop/hdfs-site.xml"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"<configuration>\n    <property>\n        <name>dfs.replication</name>\n        <value>1</value>\n    </property>\n</configuration>\n")),(0,n.kt)("h3",{id:"\u66f4\u65b0yarn\u914d\u7f6e"},"\u66f4\u65b0yarn\u914d\u7f6e"),(0,n.kt)("h4",{id:"etchadoopmapred-sitexml"},"etc/hadoop/mapred-site.xml"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"mapreduce.application.classpath"),"\u503c\u4f86\u81f3\u65bc",(0,n.kt)("inlineCode",{parentName:"p"},"hadoop classpath"),"\u6307\u4ee4"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"<configuration>\n    <property>\n        <name>mapreduce.framework.name</name>\n        <value>yarn</value>\n        <name>mapreduce.application.classpath</name>\n        <value>/opt/hadoop/etc/hadoop:/opt/hadoop/share/hadoop/common/lib/*:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/hadoop/hdfs:/opt/hadoop/share/hadoop/hdfs/lib/*:/opt/hadoop/share/hadoop/hdfs/*:/opt/hadoop/share/hadoop/mapreduce/*:/opt/hadoop/share/hadoop/yarn:/opt/hadoop/share/hadoop/yarn/lib/*:/opt/hadoop/share/hadoop/yarn/*:/usr/lib/jvm/java-1.8.0-openjdk-amd64/lib/tools.jar</value>\n    </property>\n</configuration>\n")),(0,n.kt)("h4",{id:"etchadoopyarn-sitexml"},"etc/hadoop/yarn-site.xml"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"<configuration>\n    <property>\n        <name>yarn.nodemanager.aux-services</name>\n        <value>mapreduce_shuffle</value>\n    </property>\n</configuration>\n")),(0,n.kt)("h2",{id:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede"},"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede"),(0,n.kt)("h4",{id:"\u66f4\u65b0-etchadoopworkers"},"\u66f4\u65b0 etc/hadoop/workers"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-script"},"s1\ns2\n")),(0,n.kt)("h2",{id:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede"},"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede"),(0,n.kt)("p",null,"\u4e3b\u7bc0\u9ede\u6253\u5305hadoop\u4e26\u50b3\u5230\u5b50\u7bc0\u9ede"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"tar -zcf ./hadoop.tar.gz ./hadoop\nscp ./hadoop.tart.gz hadoop2:/home/hadoop/hadoop\nscp ./hadoop.tart.gz hadoop2:/home/hadoop/hadoop\n")),(0,n.kt)("p",null,"\u5b50\u7bc0\u9ede\u89e3\u58d3\u7e2e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"tar -zxf hadoop.tar.gz\n")),(0,n.kt)("h2",{id:"\u555f\u52d5hdfs\u8207yarn"},"\u555f\u52d5hdfs\u8207yarn"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u65bchadoop1\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4\nhdfs namenode -format\nstart-dfs.sh\nstart-yarn.sh\n")))}c.isMDXComponent=!0}}]);