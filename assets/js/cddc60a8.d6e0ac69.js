"use strict";(self.webpackChunk_0_yukali_0_github_io=self.webpackChunk_0_yukali_0_github_io||[]).push([[5836],{8905:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>g,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var a=r(4848),o=r(8453);const s={id:"argocdbuild",title:"ArgoCD\u5b89\u88dd"},c="ArgoCD \u5b89\u88dd",i={id:"kubernetes-native/gitops/argocd/argocdbuild",title:"ArgoCD\u5b89\u88dd",description:"\u90e8\u5c6cArgoCD\u65bck8s",source:"@site/docs/kubernetes-native/gitops/argocd/install.md",sourceDirName:"kubernetes-native/gitops/argocd",slug:"/kubernetes-native/gitops/argocd/argocdbuild",permalink:"/docs/kubernetes-native/gitops/argocd/argocdbuild",draft:!1,unlisted:!1,editUrl:"https://github.com/0yukali0/0yukali0.github.io/docs/kubernetes-native/gitops/argocd/install.md",tags:[],version:"current",frontMatter:{id:"argocdbuild",title:"ArgoCD\u5b89\u88dd"}},t={},d=[{value:"\u90e8\u5c6cArgoCD\u65bck8s",id:"\u90e8\u5c6cargocd\u65bck8s",level:2},{value:"\u5b89\u88ddArgoCD Cli",id:"\u5b89\u88ddargocd-cli",level:2},{value:"\u66f4\u65b0\u670d\u52d9\u70baLoadBalancer",id:"\u66f4\u65b0\u670d\u52d9\u70baloadbalancer",level:2},{value:"\u8a2d\u5b9aIngress(\u53ef\u9078)",id:"\u8a2d\u5b9aingress\u53ef\u9078",level:2},{value:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc",id:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc",level:2},{value:"\u9810\u671f\u756b\u9762",id:"\u9810\u671f\u756b\u9762",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"argocd-\u5b89\u88dd",children:"ArgoCD \u5b89\u88dd"})}),"\n",(0,a.jsx)(n.h2,{id:"\u90e8\u5c6cargocd\u65bck8s",children:"\u90e8\u5c6cArgoCD\u65bck8s"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"kubectl create namespace argocd\nkubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5b89\u88ddargocd-cli",children:"\u5b89\u88ddArgoCD Cli"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"curl -sSL -o argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64\nsudo install -m 555 argocd-linux-amd64 /usr/local/bin/argocd\nrm argocd-linux-amd64\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u66f4\u65b0\u670d\u52d9\u70baloadbalancer",children:"\u66f4\u65b0\u670d\u52d9\u70baLoadBalancer"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'kubectl patch svc argocd-server -n argocd -p \'{"spec": {"type": "LoadBalancer"}}\'\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsx)(n.p,{children:"\u7576\u5b8c\u6210metal-LB\u5b89\u88dd\u8207\u8a2d\u5b9a\u5f8c\uff0cload Balancer\u624d\u6709\u610f\u7fa9"})}),"\n",(0,a.jsx)(n.h2,{id:"\u8a2d\u5b9aingress\u53ef\u9078",children:"\u8a2d\u5b9aIngress(\u53ef\u9078)"}),"\n",(0,a.jsx)(n.p,{children:"\u90e8\u5c6cIngress\u7269\u4ef6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: argocd-server-http-ingress\n  namespace: argocd\n  annotations:\n    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"\n    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"\nspec:\n  ingressClassName: nginx\n  rules:\n  - http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: argocd-server\n            port:\n              name: http\n    host: argocd.example.com\n  tls:\n  - hosts:\n    - argocd.example.com\n    secretName: argocd-secret\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u66f4\u6539client\u7aef\u7684\u4e3b\u6a5f\u7684hosts\u6a94\u6848"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"linux\u8def\u5f91\u70ba/etc/hosts"}),"\n",(0,a.jsx)(n.li,{children:"window\u8def\u5f91\u70baC:\\Windows\\System32\\drivers\n\u6211\u7684Ingress-controller\u7684service(load balancer)\u7684\u5916\u90e8IP\u70ba192.168.0.170\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"192.168.0.170 argocd.example.com\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u56e0\u6b64\u700f\u89bd\u5668\u8f38\u5165***",(0,a.jsx)(n.a,{href:"http://argocd.example.com***%EF%BC%8C%E4%BE%BF%E6%9C%83%E6%89%BEIngress-controller%E4%B8%A6%E8%BD%89%E6%8E%A5%E5%88%B0argocd%E6%9C%8D%E5%8B%99%E4%BA%86%E3%80%82",children:"http://argocd.example.com***\uff0c\u4fbf\u6703\u627eIngress-controller\u4e26\u8f49\u63a5\u5230argocd\u670d\u52d9\u4e86\u3002"})]}),"\n",(0,a.jsx)(n.h2,{id:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc",children:"\u7372\u53d6admin\u5bc6\u78bc\u4e26\u66f4\u65b0\u5bc6\u78bc"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"argocd admin initial-password -n argocd\nargocd login <ARGOCD_SERVER> //\u4e5f\u5c31\u662fload balancer\u5916\u90e8IP\nargocd account update-password\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u9810\u671f\u756b\u9762",children:"\u9810\u671f\u756b\u9762"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"ArgoCD",src:r(9992).A+"",width:"1911",height:"791"})})]})}function g(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},9992:(e,n,r)=>{r.d(n,{A:()=>a});const a=r.p+"assets/images/argocdNg-98e29c27ccce1946aff43b16a2ac3acd.png"},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var a=r(6540);const o={},s=a.createContext(o);function c(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);