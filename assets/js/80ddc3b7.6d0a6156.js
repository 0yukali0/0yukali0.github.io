"use strict";(self.webpackChunk_0_yukali_0_github_io=self.webpackChunk_0_yukali_0_github_io||[]).push([[6772],{2973:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>r});var n=s(4848),l=s(8453);const i={id:"buildkubeflow",title:"kubeflow\u5b89\u88dd"},o="\u555f\u52d5k8s\u6d41\u7a0b",a={id:"kubernetes-native/mlops/kubeflow/buildkubeflow",title:"kubeflow\u5b89\u88dd",description:"\u81ea\u52d5\u914d\u7f6epv",source:"@site/docs/kubernetes-native/mlops/kubeflow/install.md",sourceDirName:"kubernetes-native/mlops/kubeflow",slug:"/kubernetes-native/mlops/kubeflow/buildkubeflow",permalink:"/docs/kubernetes-native/mlops/kubeflow/buildkubeflow",draft:!1,unlisted:!1,editUrl:"https://github.com/0yukali0/0yukali0.github.io/docs/kubernetes-native/mlops/kubeflow/install.md",tags:[],version:"current",frontMatter:{id:"buildkubeflow",title:"kubeflow\u5b89\u88dd"}},u={},r=[{value:"\u81ea\u52d5\u914d\u7f6epv",id:"\u81ea\u52d5\u914d\u7f6epv",level:2},{value:"kustmize\u5b89\u88dd",id:"kustmize\u5b89\u88dd",level:2},{value:"kubeflow 1.8\u5b89\u88dd",id:"kubeflow-18\u5b89\u88dd",level:2},{value:"\u8a3b\u518a\u4f7f\u7528\u8005",id:"\u8a3b\u518a\u4f7f\u7528\u8005",level:3},{value:"Https\u8a2d\u5b9a",id:"https\u8a2d\u5b9a",level:3},{value:"\u66b4\u9732istio\u670d\u52d9",id:"\u66b4\u9732istio\u670d\u52d9",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"\u555f\u52d5k8s\u6d41\u7a0b",children:"\u555f\u52d5k8s\u6d41\u7a0b"})}),"\n",(0,n.jsx)(t.h2,{id:"\u81ea\u52d5\u914d\u7f6epv",children:"\u81ea\u52d5\u914d\u7f6epv"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"wget https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u8acb\u5728storage class\u6dfb\u52a0default annotation"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'kind: StorageClass\nmetadata:\n  name: local-path\n  annotations:\n    storageclass.beta.kubernetes.io/is-default-class: "true"\n'})}),"\n",(0,n.jsx)(t.p,{children:"\u96a8\u5f8c\u5b89\u88dd"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"kubectl apply -f local-path-storage.yaml\n"})}),"\n",(0,n.jsx)(t.h2,{id:"kustmize\u5b89\u88dd",children:"kustmize\u5b89\u88dd"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'mkdir kustmize && cd kustmize\ncurl -s "https://raw.githubusercontent.com/kubernetes-sigs/kustomize/master/hack/install_kustomize.sh"  | bash\n'})}),"\n",(0,n.jsxs)(t.p,{children:["\u66f4\u6539.profile\u4e26",(0,n.jsx)(t.code,{children:"source .profile"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"PATH=$PATH:/home/user/kustmize\n"})}),"\n",(0,n.jsx)(t.h2,{id:"kubeflow-18\u5b89\u88dd",children:"kubeflow 1.8\u5b89\u88dd"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"mkdir kubeflow && cd kubeflow\ngit clone https://github.com/kubeflow/manifests.git -b v1.8.0 && cd manifests\n\nkustomize build common/cert-manager/cert-manager/base | kubectl apply -f -\nkubectl wait --for=condition=ready pod -l 'app in (cert-manager,webhook)' --timeout=180s -n cert-manager\nkustomize build common/cert-manager/kubeflow-issuer/base | kubectl apply -f -\n\nkustomize build common/istio-1-17/istio-crds/base | kubectl apply -f -\nkustomize build common/istio-1-17/istio-namespace/base | kubectl apply -f -\nkustomize build common/istio-1-17/istio-install/base | kubectl apply -f -\n\nkustomize build common/oidc-client/oidc-authservice/base | kubectl apply -f -\nkustomize build common/dex/overlays/istio | kubectl apply -f -\n\nkustomize build common/knative/knative-serving/overlays/gateways | kubectl apply -f -\nkustomize build common/istio-1-17/cluster-local-gateway/base | kubectl apply -f -\nkustomize build common/knative/knative-eventing/base | kubectl apply -f -\n\nkustomize build common/kubeflow-namespace/base | kubectl apply -f -\nkustomize build common/kubeflow-roles/base | kubectl apply -f -\nkustomize build common/istio-1-17/kubeflow-istio-resources/base | kubectl apply -f -\nkustomize build apps/pipeline/upstream/env/cert-manager/platform-agnostic-multi-user | kubectl apply -f -\n\nkustomize build contrib/kserve/kserve | kubectl apply -f -\nkustomize build contrib/kserve/models-web-app/overlays/kubeflow | kubectl apply -f -\n\nkustomize build apps/katib/upstream/installs/katib-with-kubeflow | kubectl apply -f -\n\nkustomize build apps/centraldashboard/upstream/overlays/kserve | kubectl apply -f -\n\nkustomize build apps/admission-webhook/upstream/overlays/cert-manager | kubectl apply -f -\n\nkustomize build apps/jupyter/notebook-controller/upstream/overlays/kubeflow | kubectl apply -f -\nkustomize build apps/jupyter/jupyter-web-app/upstream/overlays/istio | kubectl apply -f -\n\nkustomize build apps/pvcviewer-controller/upstream/default | kubectl apply -f -\n\nkustomize build apps/profiles/upstream/overlays/kubeflow | kubectl apply -f -\n\nkustomize build apps/volumes-web-app/upstream/overlays/istio | kubectl apply -f -\n\nkustomize build apps/tensorboard/tensorboards-web-app/upstream/overlays/istio | kubectl apply -f -\nkustomize build apps/tensorboard/tensorboard-controller/upstream/overlays/kubeflow | kubectl apply -f -\n\nkustomize build apps/training-operator/upstream/overlays/kubeflow | kubectl apply -f -\n"})}),"\n",(0,n.jsx)(t.h3,{id:"\u8a3b\u518a\u4f7f\u7528\u8005",children:"\u8a3b\u518a\u4f7f\u7528\u8005"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"kustomize build common/user-namespace/base | kubectl apply -f -\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u90e8\u5c6ccerticate.yml"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"apiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n  name: kubeflow-ingressgateway-certs\n  namespace: istio-system\nspec:\n  secretName: kubeflow-ingressgateway-certs\n  issuerRef:\n    name: kubeflow-self-signing-issuer\n    kind: ClusterIssuer\n  commonName: kubeflow.example.com\n  dnsNames:\n    - kubeflow.example.com\n"})}),"\n",(0,n.jsx)(t.h3,{id:"https\u8a2d\u5b9a",children:"Https\u8a2d\u5b9a"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"kubectl edit gateway -n kubeflow kubeflow-gateway"})," \u5c07HTTP\u6539\u70baHTTPS\uff0cPort\u6539\u7528443"]}),"\n",(0,n.jsx)(t.h2,{id:"\u66b4\u9732istio\u670d\u52d9",children:"\u66b4\u9732istio\u670d\u52d9"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"kubectl port-forward svc/istio-ingressgateway -n istio-system 8080:80 --address='0.0.0.0'"})})]})}function p(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>a});var n=s(6540);const l={},i=n.createContext(l);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);