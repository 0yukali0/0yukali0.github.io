"use strict";(self.webpackChunk_0_yukali_0_github_io=self.webpackChunk_0_yukali_0_github_io||[]).push([[8656],{5102:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>l,contentTitle:()=>s,default:()=>t,frontMatter:()=>h,metadata:()=>r,toc:()=>p});var n=a(4848),d=a(8453);const h={id:"buildhadoop",title:"hadoop\u53e2\u96c6\u5efa\u7acb"},s="Hadoop \u591a\u7bc0\u9ede\u5b89\u88dd",r={id:"hadoop-native/hadoop/buildhadoop",title:"hadoop\u53e2\u96c6\u5efa\u7acb",description:"VM\u74b0\u5883",source:"@site/docs/hadoop-native/hadoop/buildhadoop.md",sourceDirName:"hadoop-native/hadoop",slug:"/hadoop-native/hadoop/buildhadoop",permalink:"/docs/hadoop-native/hadoop/buildhadoop",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/hadoop-native/hadoop/buildhadoop.md",tags:[],version:"current",frontMatter:{id:"buildhadoop",title:"hadoop\u53e2\u96c6\u5efa\u7acb"}},l={},p=[{value:"VM\u74b0\u5883",id:"vm\u74b0\u5883",level:2},{value:"Java 8 \u5b89\u88dd",id:"java-8-\u5b89\u88dd",level:2},{value:"SSH \u5b89\u88dd",id:"ssh-\u5b89\u88dd",level:2},{value:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a",id:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a",level:3},{value:"hadoop\u5b89\u88dd",id:"hadoop\u5b89\u88dd",level:2},{value:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a",id:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a",level:2},{value:"hadoop\u7684JAVA_HOME\u8a2d\u5b9a",id:"hadoop\u7684java_home\u8a2d\u5b9a",level:3},{value:"etc/hadoop/hadoop-env.sh",id:"etchadoophadoop-envsh",level:4},{value:"\u66f4\u65b0hdfs\u914d\u7f6e",id:"\u66f4\u65b0hdfs\u914d\u7f6e",level:3},{value:"etc/hadoop/core-site.xml",id:"etchadoopcore-sitexml",level:4},{value:"etc/hadoop/hdfs-site.xml",id:"etchadoophdfs-sitexml",level:4},{value:"\u66f4\u65b0yarn\u914d\u7f6e",id:"\u66f4\u65b0yarn\u914d\u7f6e",level:3},{value:"etc/hadoop/mapred-site.xml",id:"etchadoopmapred-sitexml",level:4},{value:"etc/hadoop/yarn-site.xml",id:"etchadoopyarn-sitexml",level:4},{value:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede",id:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede",level:2},{value:"\u66f4\u65b0 etc/hadoop/workers",id:"\u66f4\u65b0-etchadoopworkers",level:4},{value:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede",id:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede",level:2},{value:"\u555f\u52d5hdfs\u8207yarn",id:"\u555f\u52d5hdfs\u8207yarn",level:2}];function i(e){const o={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"hadoop-\u591a\u7bc0\u9ede\u5b89\u88dd",children:"Hadoop \u591a\u7bc0\u9ede\u5b89\u88dd"})}),"\n",(0,n.jsx)(o.h2,{id:"vm\u74b0\u5883",children:"VM\u74b0\u5883"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"Virtualbox"}),"\n",(0,n.jsx)(o.li,{children:"ubuntu server 22.04"}),"\n",(0,n.jsx)(o.li,{children:"2\u7bc0\u9ede(1\u4e3b1\u5974\uff0cbridge)\n/etc/hosts\u5982\u4e0b"}),"\n"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"s1 192.168.0.170\ns2 192.168.0.171\n"})}),"\n",(0,n.jsx)(o.h2,{id:"java-8-\u5b89\u88dd",children:"Java 8 \u5b89\u88dd"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"sudo apt install openjdk-8-jre-headless -y\nsudo apt install openjdk-8-jdk-headless -y\n"})}),"\n",(0,n.jsx)(o.h2,{id:"ssh-\u5b89\u88dd",children:"SSH \u5b89\u88dd"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"sudo apt-get install ssh -y\nsudo apt-get install openssh-server -y\n"})}),"\n",(0,n.jsx)(o.h3,{id:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a",children:"\u7121\u5bc6\u78bcssh\u7b49\u5165\u8a2d\u5b9a"}),"\n",(0,n.jsx)(o.p,{children:"\u5c07\u4e3b\u7bc0\u9ede\u7684pub key\u8907\u88fd\u5230\u5b50\u7bc0\u9ede"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\nchmod 0600 ~/.ssh/authorized_keys\nssh-copy-id -i ~/.ssh/authorized_keys slave:/home/hadoop/.ssh/authorized_keys #\u4f7f\u7528scp\u4e5f\u53ef\n"})}),"\n",(0,n.jsx)(o.h2,{id:"hadoop\u5b89\u88dd",children:"hadoop\u5b89\u88dd"}),"\n",(0,n.jsx)(o.p,{children:"\u4e0b\u8f09hadoop binary\u6a94\uff0c\u89e3\u58d3\u7e2e\u3002"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# /home/hadoop/\nwget https://dlcdn.apache.org/hadoop/common/hadoop-3.3.6/hadoop-3.3.6.tar.gz\ntar -xvf hadoop-3.3.6.tar.gz\n# /home/hadoop/hadoop\nmv hadoop-3.3.6 hadoop\n"})}),"\n",(0,n.jsx)(o.h1,{id:"\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578",children:"\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578"}),"\n",(0,n.jsxs)(o.p,{children:[(0,n.jsx)(o.strong,{children:"\u6b64\u6b65\u9a5f\u6240\u6709\u7bc0\u9ede\u90fd\u8981\u505a"}),"\uff0c\u4fee\u6539.bashrc\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5167\u5bb9\u3002"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"# HADOOP_HOME \u4ee5hadoop\u8cc7\u6599\u593e\u6240\u5728\u70ba\u4e3b\uff0c\u6211\u662f\u653e\u5728hadoop\u5bb6\u76ee\u9304\u3002\n# \u8def\u5f91\u70ba /home/hadoop/\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\nexport PATH=$JAVA_HOME/bin:$PATH\nexport HADOOP_CLASSPATH=${JAVA_HOME}/lib/tools.jar\nexport HADOOP_HOME=/home/hadoop/hadoop\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\nexport HADOOP_MAPRED_HOME=${HADOOP_HOME}\nexport HADOOP_COMMON_HOME=${HADOOP_HOME}\nexport HADOOP_HDFS_HOME=${HADOOP_HOME}\nexport YARN_HOME=${HADOOP_HOME}\n"})}),"\n",(0,n.jsx)(o.p,{children:"\u5957\u7528\u8a2d\u5b9a"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"source .bashrc\n"})}),"\n",(0,n.jsx)(o.h2,{id:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a",children:"hadoop\u914d\u7f6e\u6a94\u8a2d\u5b9a"}),"\n",(0,n.jsx)(o.h3,{id:"hadoop\u7684java_home\u8a2d\u5b9a",children:"hadoop\u7684JAVA_HOME\u8a2d\u5b9a"}),"\n",(0,n.jsx)(o.h4,{id:"etchadoophadoop-envsh",children:"etc/hadoop/hadoop-env.sh"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64\n"})}),"\n",(0,n.jsx)(o.h3,{id:"\u66f4\u65b0hdfs\u914d\u7f6e",children:"\u66f4\u65b0hdfs\u914d\u7f6e"}),"\n",(0,n.jsx)(o.h4,{id:"etchadoopcore-sitexml",children:"etc/hadoop/core-site.xml"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"<configuration>\n    <property>\n        <name>fs.defaultFS</name>\n        <value>hdfs://s1:9000</value>\n    </property>\n</configuration>\n"})}),"\n",(0,n.jsx)(o.h4,{id:"etchadoophdfs-sitexml",children:"etc/hadoop/hdfs-site.xml"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"<configuration>\n    <property>\n        <name>dfs.replication</name>\n        <value>1</value>\n    </property>\n</configuration>\n"})}),"\n",(0,n.jsx)(o.h3,{id:"\u66f4\u65b0yarn\u914d\u7f6e",children:"\u66f4\u65b0yarn\u914d\u7f6e"}),"\n",(0,n.jsx)(o.h4,{id:"etchadoopmapred-sitexml",children:"etc/hadoop/mapred-site.xml"}),"\n",(0,n.jsxs)(o.p,{children:[(0,n.jsx)(o.code,{children:"mapreduce.application.classpath"}),"\u503c\u4f86\u81f3\u65bc",(0,n.jsx)(o.code,{children:"hadoop classpath"}),"\u6307\u4ee4"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"<configuration>\n    <property>\n        <name>mapreduce.framework.name</name>\n        <value>yarn</value>\n        <name>mapreduce.application.classpath</name>\n        <value>/opt/hadoop/etc/hadoop:/opt/hadoop/share/hadoop/common/lib/*:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/hadoop/hdfs:/opt/hadoop/share/hadoop/hdfs/lib/*:/opt/hadoop/share/hadoop/hdfs/*:/opt/hadoop/share/hadoop/mapreduce/*:/opt/hadoop/share/hadoop/yarn:/opt/hadoop/share/hadoop/yarn/lib/*:/opt/hadoop/share/hadoop/yarn/*:/usr/lib/jvm/java-1.8.0-openjdk-amd64/lib/tools.jar</value>\n    </property>\n</configuration>\n"})}),"\n",(0,n.jsx)(o.h4,{id:"etchadoopyarn-sitexml",children:"etc/hadoop/yarn-site.xml"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"<configuration>\n    <property>\n        <name>yarn.nodemanager.aux-services</name>\n        <value>mapreduce_shuffle</value>\n    </property>\n</configuration>\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede",children:"\u8a2d\u5b9a\u4e3b\u7bc0\u9ede\u8207\u5b50\u7bc0\u9ede"}),"\n",(0,n.jsx)(o.h4,{id:"\u66f4\u65b0-etchadoopworkers",children:"\u66f4\u65b0 etc/hadoop/workers"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-script",children:"s1\ns2\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede",children:"\u8907\u88fdhadoop\u8cc7\u6599\u593e\u65bc\u5404\u5b50\u7bc0\u9ede"}),"\n",(0,n.jsx)(o.p,{children:"\u4e3b\u7bc0\u9ede\u6253\u5305hadoop\u4e26\u50b3\u5230\u5b50\u7bc0\u9ede"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"tar -zcf ./hadoop.tar.gz ./hadoop\nscp ./hadoop.tart.gz hadoop2:/home/hadoop/hadoop\nscp ./hadoop.tart.gz hadoop2:/home/hadoop/hadoop\n"})}),"\n",(0,n.jsx)(o.p,{children:"\u5b50\u7bc0\u9ede\u89e3\u58d3\u7e2e"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"tar -zxf hadoop.tar.gz\n"})}),"\n",(0,n.jsx)(o.h2,{id:"\u555f\u52d5hdfs\u8207yarn",children:"\u555f\u52d5hdfs\u8207yarn"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# \u65bchadoop1\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4\nhdfs namenode -format\nstart-dfs.sh\nstart-yarn.sh\n"})})]})}function t(e={}){const{wrapper:o}={...(0,d.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}},8453:(e,o,a)=>{a.d(o,{R:()=>s,x:()=>r});var n=a(6540);const d={},h=n.createContext(d);function s(e){const o=n.useContext(h);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),n.createElement(h.Provider,{value:o},e.children)}}}]);